{% extends "shared/userLayout/navigationLayout.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/user/appointment.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/user/userdashboard.css') }}">
{% endblock %}

{% block content %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment</title>
    <link rel="stylesheet" href="css/userdashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/appointment.css">
</head>

<body>


    <!-- Main Content -->
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-calendar-alt"></i> My Appointments
            </h1>
        </div>

        <!-- Side-by-Side Calendar and Upcoming Appointments -->
        <div class="appointment-layout">
            <!-- Calendar Section -->
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="month-nav">
                        <button class="nav-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="month-title">June 2023</h2>
                        <button class="nav-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-calendar-day"></i> Today
                    </button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>

                    <!-- Previous Month -->
                    <div class="calendar-day other-month">
                        <span class="day-number">28</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">29</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">30</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">31</span>
                    </div>
                    <!-- Current Month -->
                    <div class="calendar-day">
                        <span class="day-number">1</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">2</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">3</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">4</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">5</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">6</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">7</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">8</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">9</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">10</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">11</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">12</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">13</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">14</span>
                    </div>
                    <div class="calendar-day current-day">
                        <span class="day-number">15</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">16</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">17</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">18</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">19</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">20</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">21</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">22</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">23</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">24</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">25</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">26</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">27</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">28</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">29</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">30</span>
                    </div>
                    <!-- Next Month -->
                    <div class="calendar-day other-month">
                        <span class="day-number">1</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">2</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">3</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">4</span>
                    </div>
                </div>
            </div>

            <!-- Upcoming Appointments Sidebar -->
            <div class="upcoming-appointments">
                <h2 class="section-title">
                    <i class="fas fa-clock"></i> Upcoming
                </h2>
                <div class="appointment-list">
                    <!-- Appointment Item 1 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Today, 2:00 PM</span>
                            <span class="appointment-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Dr. Chen"
                                class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Mei Chen</div>
                                <div class="therapist-specialty">Clinical Psychologist</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>Video Call</span>
                            <span>45 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Appointment Item 2 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Jun 18, 10:30 AM</span>
                            <span class="appointment-status status-pending">Pending</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Dr. Rodriguez"
                                class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Carlos Rodriguez</div>
                                <div class="therapist-specialty">CBT Specialist</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>In-Person</span>
                            <span>60 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Appointment Item 3 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Jun 25, 3:15 PM</span>
                            <span class="appointment-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Dr. Patel"
                                class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Priya Patel</div>
                                <div class="therapist-specialty">Mindfulness Coach</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>Phone Call</span>
                            <span>30 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Past Appointments Section -->
        <div class="past-appointments">
            <h2 class="section-title">
                <i class="fas fa-history"></i> Past Appointments
            </h2>
            <div class="appointment-cards">
                <!-- Past Appointment Card 1 -->
                <div class="appointment-card">
                    <div class="card-header">
                        <div class="card-date">Jun 6, 2023</div>
                        <div class="card-status status-completed">Completed</div>
                    </div>
                    <div class="card-body">
                        <div class="therapist-info">
                            <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="Dr. Johnson"
                                class="therapist-img">
                            <div class="therapist-details">
                                <h3>Dr. Michael Johnson</h3>
                                <p>Trauma Therapist</p>
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="detail-row">
                                <span class="detail-label">Session Type:</span>
                                <span class="detail-value">Video Call</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">50 mins</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Notes:</span>
                                <span class="detail-value">
                                    <a href="#"><i class="fas fa-file-alt"></i> View</a>
                                </span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-redo"></i> Rebook
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-star"></i> Rate
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Past Appointment Card 2 -->
                <div class="appointment-card">
                    <div class="card-header">
                        <div class="card-date">May 28, 2023</div>
                        <div class="card-status status-cancelled">Cancelled</div>
                    </div>
                    <div class="card-body">
                        <div class="therapist-info">
                            <img src="https://randomuser.me/api/portraits/women/33.jpg" alt="Dr. Williams"
                                class="therapist-img">
                            <div class="therapist-details">
                                <h3>Dr. Lisa Williams</h3>
                                <p>Family Therapist</p>
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="detail-row">
                                <span class="detail-label">Session Type:</span>
                                <span class="detail-value">In-Person</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">60 mins</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Reason:</span>
                                <span class="detail-value">Personal conflict</span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-redo"></i> Rebook
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- Chatbot Interface -->
    <button class="chatbot-toggle" id="chatbotToggle">
        <i class="fas fa-comment-dots"></i>
    </button>

    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <span><i class="fas fa-robot me-2"></i>SerenityQ Assistant</span>
            <button class="chatbot-close" id="chatbotClose">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot-message">Hello Sarah! I'm SerenityQ, your mental health assistant. How can I help
                you today?</div>
            <div class="message bot-message">You have an appointment with Dr. Chen tomorrow at 10:00 AM. Would you like
                me to remind you?</div>
        </div>
        <div class="chatbot-input">
            <input type="text" placeholder="Type your message..." id="chatbotInput">
            <button id="chatbotSend"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>




    <!-- New Appointment Modal -->
    <div class="modal" id="newAppointmentModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> New Appointment</h2>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="therapistSelect">Select Therapist</label>
                    <select id="therapistSelect" class="form-control">
                        <option value="">-- Select a therapist --</option>
                        <option value="1">Dr. Mei Chen - Clinical Psychologist</option>
                        <option value="2">Dr. Carlos Rodriguez - CBT Specialist</option>
                        <option value="3">Dr. Priya Patel - Mindfulness Coach</option>
                        <option value="4">Dr. Michael Johnson - Trauma Therapist</option>
                        <option value="5">Dr. Lisa Williams - Family Therapist</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="appointmentDate">Date</label>
                    <input type="date" id="appointmentDate" class="form-control">
                </div>

                <div class="form-group">
                    <label for="appointmentTime">Time</label>
                    <select id="appointmentTime" class="form-control">
                        <option value="">-- Select available time --</option>
                        <option value="09:00">9:00 AM</option>
                        <option value="10:30">10:30 AM</option>
                        <option value="14:00">2:00 PM</option>
                        <option value="15:30">3:30 PM</option>
                        <option value="17:00">5:00 PM</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sessionType">Session Type</label>
                    <select id="sessionType" class="form-control">
                        <option value="video">Video Call</option>
                        <option value="phone">Phone Call</option>
                        <option value="in-person">In-Person</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="sessionNotes">Notes (Optional)</label>
                    <textarea id="sessionNotes" class="form-control" rows="3"
                        placeholder="Any specific concerns or notes for the therapist..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelNewAppointment">Cancel</button>
                <button class="btn btn-primary" id="confirmNewAppointment">Book Appointment</button>
            </div>
        </div>
    </div>

    <!-- Reschedule Modal -->
    <div class="modal" id="rescheduleModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h2><i class="fas fa-edit"></i> Reschedule Appointment</h2>
                <div class="current-appointment-info">
                    <p>Current: <span id="currentAppointmentTime">Jun 18, 10:30 AM</span> with <span
                            id="currentTherapistName">Dr. Carlos Rodriguez</span></p>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="rescheduleDate">New Date</label>
                    <input type="date" id="rescheduleDate" class="form-control">
                </div>

                <div class="form-group">
                    <label for="rescheduleTime">New Time</label>
                    <select id="rescheduleTime" class="form-control">
                        <option value="">-- Select available time --</option>
                        <option value="09:00">9:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="14:00">2:00 PM</option>
                        <option value="16:00">4:00 PM</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="rescheduleReason">Reason for Rescheduling (Optional)</label>
                    <textarea id="rescheduleReason" class="form-control" rows="3"
                        placeholder="Let us know why you're rescheduling..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelReschedule">Cancel</button>
                <button class="btn btn-primary" id="confirmReschedule">Confirm Reschedule</button>
            </div>
        </div>
    </div>

    <!-- Cancel Appointment Modal -->
    <div class="modal" id="cancelModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h2><i class="fas fa-times"></i> Cancel Appointment</h2>
                <div class="current-appointment-info">
                    <p>Scheduled: <span id="cancelAppointmentTime">Jun 18, 10:30 AM</span> with <span
                            id="cancelTherapistName">Dr. Carlos Rodriguez</span></p>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="cancelReason">Reason for Cancellation</label>
                    <select id="cancelReason" class="form-control">
                        <option value="">-- Select a reason --</option>
                        <option value="schedule">Scheduling Conflict</option>
                        <option value="not-needed">No Longer Needed</option>
                        <option value="therapist">Want Different Therapist</option>
                        <option value="other">Other Reason</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="cancelDetails">Additional Details (Optional)</label>
                    <textarea id="cancelDetails" class="form-control" rows="3"
                        placeholder="Provide any additional details..."></textarea>
                </div>

                <div class="cancellation-policy">
                    <h4>Cancellation Policy</h4>
                    <p>Appointments cancelled with less than 24 hours notice may be subject to a cancellation fee.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelCancel">Go Back</button>
                <button class="btn btn-danger" id="confirmCancel">Confirm Cancellation</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content confirmation-content">
            <div class="modal-header">
                <div class="confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 id="confirmationTitle">Appointment Booked!</h2>
            </div>
            <div class="modal-body">
                <p id="confirmationMessage">Your appointment with Dr. Mei Chen has been confirmed for June 15 at 2:00
                    PM.</p>
                <div class="confirmation-details" id="confirmationDetails">
                    <!-- Details will be inserted here by JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="closeConfirmation">Close</button>
            </div>
        </div>
    </div>

    {% endblock %}



    {% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/user/appointment.js') }}"></script>
    <script src="{{ url_for('static', filename='js/user/userdashboard.js') }}"></script>
    {% endblock %}